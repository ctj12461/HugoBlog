<!doctype html><html lang=zh><head><title>MultiGenerator ä½¿ç”¨æ–‡æ¡£ - ctj12461's Blog</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name=renderer content="webkit"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=format-detection content="telephone=no,email=no,adress=no"><meta name=theme-color content="#000000"><meta http-equiv=window-target content="_top"><meta name=description content="æ¦‚è¿° MultiGenerator æ˜¯ä¸€ä¸ªä¸º OI è€Œç”Ÿçš„å¤šçº¿ç¨‹å¹¶è¡Œæ•°æ®ç”Ÿæˆåº“ï¼ŒåŸºäº C++ 17ï¼Œä½¿ç”¨é¢å‘å¯¹è±¡å’Œæ³›å‹ç­‰ Morden C++ é«˜çº§ç‰¹æ€§ï¼Œåªéœ€è¦æ·»åŠ æœ€å°‘çš„é¢å¤–ä»£ç ï¼Œå°±å¯ä»¥è·å¾—æœ€é«˜çš„æ€§èƒ½ã€‚ä»¥"><meta name=generator content="Hugo 0.96.0 with theme pure"><title>MultiGenerator ä½¿ç”¨æ–‡æ¡£ - ctj12461's Blog</title><link rel=stylesheet href=https://ctj12461.vercel.app/css/style.min.e64d754037c0ee0ec4e20ab1d6f07740ace61729bc03850559b8caa21ae4a597.css><link rel=stylesheet href=https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css async><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css async><meta property="og:title" content="MultiGenerator ä½¿ç”¨æ–‡æ¡£"><meta property="og:description" content="æ¦‚è¿° MultiGenerator æ˜¯ä¸€ä¸ªä¸º OI è€Œç”Ÿçš„å¤šçº¿ç¨‹å¹¶è¡Œæ•°æ®ç”Ÿæˆåº“ï¼ŒåŸºäº C++ 17ï¼Œä½¿ç”¨é¢å‘å¯¹è±¡å’Œæ³›å‹ç­‰ Morden C++ é«˜çº§ç‰¹æ€§ï¼Œåªéœ€è¦æ·»åŠ æœ€å°‘çš„é¢å¤–ä»£ç ï¼Œå°±å¯ä»¥è·å¾—æœ€é«˜çš„æ€§èƒ½ã€‚ä»¥"><meta property="og:type" content="article"><meta property="og:url" content="https://ctj12461.vercel.app/contents/20220404-multigenerator-document/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-04T22:15:15+08:00"><meta property="article:modified_time" content="2022-04-04T22:15:15+08:00"><meta itemprop=name content="MultiGenerator ä½¿ç”¨æ–‡æ¡£"><meta itemprop=description content="æ¦‚è¿° MultiGenerator æ˜¯ä¸€ä¸ªä¸º OI è€Œç”Ÿçš„å¤šçº¿ç¨‹å¹¶è¡Œæ•°æ®ç”Ÿæˆåº“ï¼ŒåŸºäº C++ 17ï¼Œä½¿ç”¨é¢å‘å¯¹è±¡å’Œæ³›å‹ç­‰ Morden C++ é«˜çº§ç‰¹æ€§ï¼Œåªéœ€è¦æ·»åŠ æœ€å°‘çš„é¢å¤–ä»£ç ï¼Œå°±å¯ä»¥è·å¾—æœ€é«˜çš„æ€§èƒ½ã€‚ä»¥"><meta itemprop=datePublished content="2022-04-04T22:15:15+08:00"><meta itemprop=dateModified content="2022-04-04T22:15:15+08:00"><meta itemprop=wordCount content="4182"><meta itemprop=keywords content="C++,OI,å¤šçº¿ç¨‹,MultiGenerator,é¡¹ç›®,"><meta name=twitter:card content="summary"><meta name=twitter:title content="MultiGenerator ä½¿ç”¨æ–‡æ¡£"><meta name=twitter:description content="æ¦‚è¿° MultiGenerator æ˜¯ä¸€ä¸ªä¸º OI è€Œç”Ÿçš„å¤šçº¿ç¨‹å¹¶è¡Œæ•°æ®ç”Ÿæˆåº“ï¼ŒåŸºäº C++ 17ï¼Œä½¿ç”¨é¢å‘å¯¹è±¡å’Œæ³›å‹ç­‰ Morden C++ é«˜çº§ç‰¹æ€§ï¼Œåªéœ€è¦æ·»åŠ æœ€å°‘çš„é¢å¤–ä»£ç ï¼Œå°±å¯ä»¥è·å¾—æœ€é«˜çš„æ€§èƒ½ã€‚ä»¥"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body class="main-center theme-black" itemscope itemtype=http://schema.org/WebPage><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=slimContent><div class=navbar-header><div class="profile-block text-center"><a id=avatar href=https://github.com/ctj12461 target=_blank><img class="img-circle img-rotate" src=https://ctj12461.vercel.app/avatar.jpg width=200 height=200></a><h2 id=name class="hidden-xs hidden-sm">ctj12461</h2><h3 id=title class="hidden-xs hidden-sm hidden-md"></h3><small id=location class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Fuzhou, China</small></div><div class=search id=search-form-wrap><form class="search-form sidebar-form"><div class=input-group><input type=text class="search-form-input form-control" placeholder=æœç´¢>
<span class=input-group-btn><button type=submit class="search-form-submit btn btn-flat" onclick=return!1><i class="icon icon-search"></i></button></span></div><div class=ins-search><div class=ins-search-mask></div><div class=ins-search-container><div class=ins-input-wrapper><input type=text class=ins-search-input placeholder=æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ... x-webkit-speech>
<button type=button class="close ins-close ins-selectable" data-dismiss=modal aria-label=Close><span aria-hidden=true>Ã—</span></button></div><div class=ins-section-wrapper><div class=ins-section-container></div></div></div></div></form></div><button class="navbar-toggle collapsed" type=button data-toggle=collapse data-target=#main-navbar aria-controls=main-navbar aria-expanded=false>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button></div><nav id=main-navbar class="collapse navbar-collapse" itemscope itemtype=http://schema.org/SiteNavigationElement role=navigation><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href=/><i class="icon icon-home-fill"></i>
<span class=menu-title>Home</span></a></li><li class="menu-item menu-item-archives"><a href=/posts/><i class="icon icon-archives-fill"></i>
<span class=menu-title>Archives</span></a></li><li class="menu-item menu-item-categories"><a href=/categories/><i class="icon icon-folder"></i>
<span class=menu-title>Categories</span></a></li><li class="menu-item menu-item-tags"><a href=/tags/><i class="icon icon-tags"></i>
<span class=menu-title>Tags</span></a></li><li class="menu-item menu-item-about"><a href=/about/><i class="icon icon-cup-fill"></i>
<span class=menu-title>About</span></a></li></ul></nav></div></header><aside class=sidebar itemscope itemtype=http://schema.org/WPSideBar><div class=slimContent><div class=widget><h3 class=widget-title>åˆ†ç±»</h3><div class=widget-body><ul class=category-list><li class=category-list-item><a href=https://ctj12461.vercel.app/categories/document/ class=category-list-link>document</a><span class=category-list-count>1</span></li><li class=category-list-item><a href=https://ctj12461.vercel.app/categories/olympiad-in-information/ class=category-list-link>olympiad-in-information</a><span class=category-list-count>8</span></li><li class=category-list-item><a href=https://ctj12461.vercel.app/categories/tech/ class=category-list-link>tech</a><span class=category-list-count>2</span></li></ul></div></div><div class=widget><h3 class=widget-title>æ ‡ç­¾</h3><div id=tag-cloud-list class=widget-body><a href=https://ctj12461.vercel.app/tags/arch-linux/ class=tag-list-link rel=1>arch-linux<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/bsgs/ class=tag-list-link rel=1>bsgs<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/burnside-%E5%BC%95%E7%90%86/ class=tag-list-link rel=1>burnside-å¼•ç†<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/c++/ class=tag-list-link rel=10>c++<span class=tag-list-count>10</span></a>
<a href=https://ctj12461.vercel.app/tags/dp/ class=tag-list-link rel=1>dp<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/linux/ class=tag-list-link rel=1>linux<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/multigenerator/ class=tag-list-link rel=1>multigenerator<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/n-%E6%AC%A1%E5%89%A9%E4%BD%99/ class=tag-list-link rel=1>n-æ¬¡å‰©ä½™<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/oi/ class=tag-list-link rel=9>oi<span class=tag-list-count>9</span></a>
<a href=https://ctj12461.vercel.app/tags/p%C3%B3lya-%E5%AE%9A%E7%90%86/ class=tag-list-link rel=1>pÃ³lya-å®šç†<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E4%B8%AD%E5%9B%BD%E5%89%A9%E4%BD%99%E5%AE%9A%E7%90%86/ class=tag-list-link rel=1>ä¸­å›½å‰©ä½™å®šç†<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E4%BA%8C%E5%88%86%E5%9B%BE/ class=tag-list-link rel=1>äºŒåˆ†å›¾<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/ class=tag-list-link rel=1>å‡½æ•°å¯¹è±¡<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E5%8E%9F%E6%A0%B9/ class=tag-list-link rel=1>åŸæ ¹<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E5%90%8C%E4%BD%99/ class=tag-list-link rel=1>åŒä½™<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E5%9B%BE%E8%AE%BA/ class=tag-list-link rel=1>å›¾è®º<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/ class=tag-list-link rel=1>å¤šçº¿ç¨‹<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E5%A4%9A%E9%A1%B9%E5%BC%8F/ class=tag-list-link rel=1>å¤šé¡¹å¼<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E5%BB%BA%E6%A8%A1/ class=tag-list-link rel=1>å»ºæ¨¡<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E6%8A%80%E6%9C%AF/ class=tag-list-link rel=1>æŠ€æœ¯<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%8F%92%E5%80%BC/ class=tag-list-link rel=1>æ‹‰æ ¼æœ—æ—¥æ’å€¼<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E6%95%B0%E5%AD%A6/ class=tag-list-link rel=6>æ•°å­¦<span class=tag-list-count>6</span></a>
<a href=https://ctj12461.vercel.app/tags/%E6%95%B0%E8%AE%BA/ class=tag-list-link rel=3>æ•°è®º<span class=tag-list-count>3</span></a>
<a href=https://ctj12461.vercel.app/tags/%E6%95%B0%E8%AE%BA%E5%88%86%E5%9D%97/ class=tag-list-link rel=1>æ•°è®ºåˆ†å—<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E6%A0%87%E5%87%86%E5%BA%93/ class=tag-list-link rel=1>æ ‡å‡†åº“<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E6%A0%91%E5%BD%A2-dp/ class=tag-list-link rel=1>æ ‘å½¢-dp<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0/ class=tag-list-link rel=1>æ¬§æ‹‰å‡½æ•°<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E6%AC%A7%E6%8B%89%E5%AE%9A%E7%90%86/ class=tag-list-link rel=1>æ¬§æ‹‰å®šç†<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E7%A7%AF%E6%80%A7%E5%87%BD%E6%95%B0/ class=tag-list-link rel=1>ç§¯æ€§å‡½æ•°<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E7%AD%9B%E6%B3%95/ class=tag-list-link rel=1>ç­›æ³•<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/ class=tag-list-link rel=1>çº¿æ€§ä»£æ•°<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E7%BD%AE%E6%8D%A2%E7%BE%A4/ class=tag-list-link rel=1>ç½®æ¢ç¾¤<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E7%BE%A4%E8%AE%BA/ class=tag-list-link rel=1>ç¾¤è®º<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E8%8E%AB%E6%AF%94%E4%B9%8C%E6%96%AF%E5%87%BD%E6%95%B0/ class=tag-list-link rel=1>è«æ¯”ä¹Œæ–¯å‡½æ•°<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E8%8E%AB%E6%AF%94%E4%B9%8C%E6%96%AF%E5%8F%8D%E6%BC%94/ class=tag-list-link rel=1>è«æ¯”ä¹Œæ–¯åæ¼”<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E9%85%8D%E7%BD%AE/ class=tag-list-link rel=1>é…ç½®<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E9%A1%B9%E7%9B%AE/ class=tag-list-link rel=1>é¡¹ç›®<span class=tag-list-count>1</span></a>
<a href=https://ctj12461.vercel.app/tags/%E9%AB%98%E6%96%AF%E6%B6%88%E5%85%83/ class=tag-list-link rel=1>é«˜æ–¯æ¶ˆå…ƒ<span class=tag-list-count>1</span></a></div><script>document.onreadystatechange=()=>{document.readyState==="complete"&&tagCloud("#tag-cloud-list a",8,20)};function tagCloud(n,s,o){let t=0,e=0;$(n).each(function(){let n=Number($(this).attr("rel"));t<n&&(t=n),(e>n||e==0)&&(e=n)});let i=(o-s)/(t-e);$(n).each(function(){let t=$(this).attr("rel")-e;$(this).css({"font-size":s+t*i+"px"})})}</script></div><div class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç« </h3><div class=widget-body><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class=item-inner><p class=item-title><a href=https://ctj12461.vercel.app/contents/20220404-multigenerator-document/ class=title>MultiGenerator ä½¿ç”¨æ–‡æ¡£</a></p><p class=item-date><time datetime="2022-04-04 22:15:15 +0800 +0800" itemprop=datePublished>2022-04-04</time></p></div></li><li><div class=item-inner><p class=item-title><a href=https://ctj12461.vercel.app/contents/20220329-traps-of-std-function-and-std-bind/ class=title>std::function å’Œ std::bind çš„ä½¿ç”¨é™·é˜±</a></p><p class=item-date><time datetime="2022-03-29 18:21:31 +0800 +0800" itemprop=datePublished>2022-03-29</time></p></div></li><li><div class=item-inner><p class=item-title><a href=https://ctj12461.vercel.app/contents/20220317-arch-linux-software-config/ class=title>Arch Linux å¸¸ç”¨è½¯ä»¶é…ç½®</a></p><p class=item-date><time datetime="2022-03-17 22:28:02 +0800 +0800" itemprop=datePublished>2022-03-17</time></p></div></li><li><div class=item-inner><p class=item-title><a href=https://ctj12461.vercel.app/contents/20220222-bipartite-graph-matching-note/ class=title>äºŒåˆ†å›¾åŒ¹é…å­¦ä¹ ç¬”è®°</a></p><p class=item-date><time datetime="2022-02-22 13:31:06 +0800 +0800" itemprop=datePublished>2022-02-22</time></p></div></li><li><div class=item-inner><p class=item-title><a href=https://ctj12461.vercel.app/contents/20220220-mobius-inversion-note/ class=title>è«æ¯”ä¹Œæ–¯åæ¼”å­¦ä¹ ç¬”è®°</a></p><p class=item-date><time datetime="2022-02-20 11:23:07 +0800 +0800" itemprop=datePublished>2022-02-20</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse" id=collapseToc itemscope itemtype=http://schema.org/WPSideBar><div class=slimContent><h4 class=toc-title>æ–‡ç« ç›®å½•</h4><nav id=toc class="js-toc toc"></nav></div></aside><main class=main role=main><div class=content><article id=- class="article article-type-" itemscope itemtype=http://schema.org/BlogPosting><div class=article-header><h1 itemprop=name><a class=article-title href=/contents/20220404-multigenerator-document/>MultiGenerator ä½¿ç”¨æ–‡æ¡£</a></h1><div class=article-meta><span class=article-date><i class="icon icon-calendar-check"></i>&nbsp;
<a href=https://ctj12461.vercel.app/contents/20220404-multigenerator-document/ class=article-date><time datetime="2022-04-04 22:15:15 +0800 +0800" itemprop=datePublished>2022-04-04</time></a></span>
<span class=article-category><i class="icon icon-folder"></i>&nbsp;
<a class=article-category-link href=/categories/document/>Document</a></span>
<span class=article-tag><i class="icon icon-tags"></i>&nbsp;
<a class=article-tag-link href=/tags/c++/>C++</a>
<a class=article-tag-link href=/tags/oi/>OI</a>
<a class=article-tag-link href=/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/>å¤šçº¿ç¨‹</a>
<a class=article-tag-link href=/tags/multigenerator/>MultiGenerator</a>
<a class=article-tag-link href=/tags/%E9%A1%B9%E7%9B%AE/>é¡¹ç›®</a></span>
<span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden=true></i>
<span id=busuanzi_container_page_pv><span id=busuanzi_value_page_pv>0</span></span></span>
<span class="post-wordcount hidden-xs" itemprop=wordCount>å­—æ•°ç»Ÿè®¡: 4182å­—</span>
<span class="post-readcount hidden-xs" itemprop=timeRequired>é˜…è¯»æ—¶é•¿: 9åˆ†</span></div></div><div class="article-entry marked-body js-toc-content" itemprop=articleBody><h2 id=æ¦‚è¿°>æ¦‚è¿°</h2><p><code>MultiGenerator</code> æ˜¯ä¸€ä¸ªä¸º <code>OI</code> è€Œç”Ÿçš„å¤šçº¿ç¨‹å¹¶è¡Œæ•°æ®ç”Ÿæˆåº“ï¼ŒåŸºäº <code>C++ 17</code>ï¼Œä½¿ç”¨é¢å‘å¯¹è±¡å’Œæ³›å‹ç­‰ <code>Morden C++</code> é«˜çº§ç‰¹æ€§ï¼Œåªéœ€è¦æ·»åŠ æœ€å°‘çš„é¢å¤–ä»£ç ï¼Œå°±å¯ä»¥è·å¾—æœ€é«˜çš„æ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªèƒ½å¤ŸæŒ‡å®šæ•°æ®èŒƒå›´çš„ <code>A + B Problem</code> æ•°æ®ç”Ÿæˆå™¨çš„ç¤ºä¾‹ä»£ç ï¼š</p><pre><code class=language-cpp>#include &lt;random&gt;
#include &lt;MultiGenerator.hpp&gt;

using MultiGenerator::DataConfig;
using MultiGenerator::GeneratingTask;
using MultiGenerator::SolutionTask;
using MultiGenerator::NormalTemplate;
using MultiGenerator::entry;
using MultiGenerator::testcase;

/** æŒ‡å®šæ•°æ®ç”Ÿæˆå™¨ï¼Œä»…éœ€ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»å’Œå®ç°ä¸€ä¸ªæˆå‘˜å‡½æ•° */
class AddGenerator : public GeneratingTask {
private:
    void generate(std::ostream &amp;data, const DataConfig &amp;config) override {
        /** DataConfig ä¸ºé…ç½®ä¿¡æ¯ï¼Œå¯ä»¥ç”¨äºå‚¨å­˜æ•°æ®èŒƒå›´ç­‰å…ƒä¿¡æ¯ */
        auto minValue = std::stoi(config.get(&quot;minValue&quot;).value());
        auto maxValue = std::stoi(config.get(&quot;maxValue&quot;).value());

        std::random_device rd;
        std::mt19937 gen(rd());
        std::uniform_int_distribution&lt;&gt; dist(minValue, maxValue);
        /** åƒ cout ä¸€æ ·è¾“å‡ºç”Ÿæˆç»“æœ */
        data &lt;&lt; dist(gen) &lt;&lt; &quot; &quot; &lt;&lt; dist(gen) &lt;&lt; std::endl;
    }
};

/** æŒ‡å®šæ•°æ®æ±‚è§£å™¨ï¼Œä¹Ÿä»…éœ€ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»å’Œå®ç°ä¸€ä¸ªæˆå‘˜å‡½æ•° */
class AddSolution : public SolutionTask {
private:
    /** å‡å¦‚ä½ æœ‰æ ‡ç¨‹ï¼Œä»…éœ€è¦å§ç¨‹åºç”¨è¿™ä¸ªç±»åŒ…è£…èµ·æ¥ï¼Œå†æŠŠ main() æ”¹ä¸ºè¿™ä¸ªæˆå‘˜å‡½æ•°å³å¯ */
    void solve(std::istream &amp;dataIn, std::ostream &amp;dataOut, const DataConfig &amp;) override {
        int a, b;
        /** åƒ cin ä¸€æ ·è¯»å…¥æ•°æ® */
        dataIn &gt;&gt; a &gt;&gt; b;
        /** åƒ cout ä¸€æ ·è¾“å‡ºç­”æ¡ˆ */
        dataOut &lt;&lt; a + b &lt;&lt; std::endl;
    }
};

int main() {
    constexpr int MAX_THREAD_COUNT = 8;
    constexpr int MAX_TESTCASE_COUNT = 20;
    constexpr char PROBLEM_NAME[] = &quot;add&quot;;
    /** åˆ›å»ºä¸€ä¸ªé¢˜ç›®ç”Ÿæˆæ¨¡æ¿ï¼ŒæŒ‡å®šæ•°æ®æ–‡ä»¶åä¸º add#.in/add#.outï¼Œ# æ˜¯æµ‹è¯•ç‚¹ç¼–å·ï¼Œå¯ä»¥å«å­ä»»åŠ¡ç¼–å· */
    MultiGenerator::NormalTemplate temp(PROBLEM_NAME);

    for (int i = 0; i &lt; MAX_TESTCASE_COUNT; ++i) {
        /** æ·»åŠ æµ‹è¯•ç‚¹é…ç½®ï¼Œå¹¶æŒ‡å®šç”Ÿæˆå™¨å’Œæ±‚è§£å™¨ */
        temp.add&lt;AddGenerator, AddSolution&gt;(testcase(i, {
            entry(&quot;minValue&quot;, i * 1000000),
            entry(&quot;maxValue&quot;, (i + 1) * 1000000)
        }));
    }
    /** å¼€å§‹æ ¹æ®æŒ‡å®šçš„çº¿ç¨‹æ•°ç”Ÿæˆæ•°æ® */
    temp.execute(MAX_THREAD_COUNT);
    return 0;
}
</code></pre><h2 id=è¦æ±‚>è¦æ±‚</h2><ul><li><code>C++ 17 Compiler</code></li><li><code>C++</code> åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬æœ€åŸºæœ¬çš„æ¨¡æ¿çš„ä½¿ç”¨ï¼ˆåŸºæœ¬éƒ½å¯ä»¥æ»¡è¶³ï¼‰</li><li>èƒ½å¤Ÿè®¤çœŸé˜…è¯»æ–‡æ¡£</li></ul><h2 id=å®‰è£…>å®‰è£…</h2><h3 id=ç¼–è¯‘å™¨æ”¯æŒ>ç¼–è¯‘å™¨æ”¯æŒ</h3><p>é¦–å…ˆç¡®ä¿ä½ æœ‰æ”¯æŒ <code>C++ 17</code> çš„ç¼–è¯‘å™¨ï¼Œå¦‚æœä½ å·²ç»æœ‰äº†ï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ã€‚</p><h4 id=linux>Linux</h4><p>ç»å¤§å¤šæ•°çš„ <code>Linux</code> å‘è¡Œç‰ˆé¢„è£…çš„ <code>GCC</code> ç‰ˆæœ¬éƒ½æ¯”è¾ƒä½ï¼Œä»…èƒ½æ”¯æŒ <code>C++ 11</code>ï¼Œå»ºè®®ä½¿ç”¨åŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…æ›´æ–°ç‰ˆæœ¬çš„ <code>GCC</code>ï¼Œè‡³å°‘ä¸º <code>GCC 8</code>ï¼Œå»ºè®® <code>GCC 11</code>ï¼Œè¿™é‡Œä»…åˆ—ä¸¾éƒ¨åˆ†å®‰è£…æ–¹æ³•ï¼Œå…·ä½“è¯·æŸ¥é˜…å‘è¡Œç‰ˆçš„åŒ…ç®¡ç†å™¨æ–‡æ¡£ã€‚</p><p><strong>Debian/Ubuntu/Deepin</strong></p><pre><code class=language-sh>$ sudo add-apt-repository ppa:ubuntu-toolchain-r/test
$ sudo apt-get update
$ sudo apt install gcc g++
</code></pre><p><strong>Arch Linux/Manjaro</strong></p><pre><code class=language-sh>$ sudo pacman -S gcc
</code></pre><p><strong>CentOS/RHEL</strong></p><pre><code class=language-sh>$ sudo yum -y install centos-release-scl
$ yum -y install devtoolset-11-gcc devtoolset-11-gcc-c++ devtoolset-11-binutils
echo &quot;source /opt/rh/devtoolset-11/enable&quot; &gt;&gt; /etc/profile
</code></pre><h4 id=windows>Windows</h4><p>æ¨èä½¿ç”¨ <code>TDM-GCC</code>ï¼Œè¿›å…¥ä¸‹è½½é¡µé¢ <a href=https://jmeubank.github.io/tdm-gcc/download/>https://jmeubank.github.io/tdm-gcc/download/</a>ï¼Œé€‰æ‹© <code>64+32-bit</code> çš„å®‰è£…åŒ…ï¼Œå®‰è£…å³å¯ã€‚</p><h4 id=macos>macOS</h4><p>ä¸€èˆ¬ <code>macOS</code> éƒ½å·²ç»è‡ªå¸¦ <code>LLVM</code> ç¯å¢ƒå’Œ <code>Clang</code>ï¼Œå¦‚æœæ²¡æœ‰è¿˜å¯ä»¥é€šè¿‡å®‰è£… <code>Xcode</code> æ¥å®‰è£… <code>g++</code>ã€‚</p><h3 id=å®‰è£…-multigenerator>å®‰è£… MultiGenerator</h3><p><code>MultiGenerator</code> æ˜¯ä¸€ä¸ª <code>header-only</code> åº“ï¼Œæ‰€ä»¥æ— éœ€ä»»ä½•ç¼–è¯‘å³å¯ä½¿ç”¨ï¼Œåªéœ€è¦å¤åˆ¶ <code>https://github.com/ctj12461/MultiGenerator/tree/master/src</code> ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ° <code>include</code> è·¯å¾„å³å¯ã€‚</p><h4 id=linux-1>Linux</h4><pre><code class=language-sh>$ git clone https://github.com/ctj12461/MultiGenerator.git
$ sudo cp -r src/* /usr/local/include
</code></pre><p>å¦‚æœä½ æœ‰ <code>xmake</code>ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼å®‰è£…ï¼š</p><pre><code class=language-sh>$ git clone https://github.com/ctj12461/MultiGenerator.git
$ cd MultiGenerator
$ sudo xmake install --root MultiGenerator
</code></pre><h4 id=windowsmacos>Windows/macOS</h4><p>å¤åˆ¶ <code>https://github.com/ctj12461/MultiGenerator/tree/master/src</code> ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ°ç¼–è¯‘å™¨æä¾›çš„ <code>include</code> è·¯å¾„ä¸‹ï¼Œå…·ä½“è¯·åœ¨ç¼–è¯‘å™¨å®‰è£…è·¯å¾„ä¸‹æœç´¢æˆ–æŸ¥çœ‹ç›¸å…³æ–‡æ¡£ã€‚ä¸€ä¸ªç®€å•çš„åŠæ³•æ˜¯æ‰¾åˆ° <code>iostream</code> çš„ä½ç½®ï¼Œç„¶åç²˜è´´åˆ°ç›¸åŒçš„ç›®å½•ä¸‹å³å¯ã€‚</p><h2 id=å¿«é€Ÿå…¥é—¨>å¿«é€Ÿå…¥é—¨</h2><h3 id=å¯¼å…¥åº“>å¯¼å…¥åº“</h3><p>ä»…éœ€è¦ä½¿ç”¨ <code>#include &lt;MultiGenerator.hpp></code> å³å¯å¯¼å…¥æœ¬åº“ï¼Œåº“ä¸­æ‰€æœ‰çš„ç±»å’Œå‡½æ•°å…¨éƒ¨å®šä¹‰åœ¨ <code>MultiGenerator</code> å‘½åç©ºé—´ä¸‹ï¼Œå¯ä»¥é€šè¿‡ <code>using namespace MultiGenerator</code> æ¥æ›´åŠ æ–¹ä¾¿åœ°ä½¿ç”¨æœ¬åº“ï¼Œä½†æ˜¯æ›´æ¨èçš„æ–¹æ³•æ˜¯ä»…å¯¹æœ‰éœ€è¦çš„ç±»æˆ–å‡½æ•°ä½¿ç”¨ <code>using</code> å£°æ˜ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><pre><code class=language-cpp>#include &lt;MultiGenerator.hpp&gt;

using MultiGenerator::DataConfig;
using MultiGenerator::GeneratingTask;
using MultiGenerator::SolutionTask;
using MultiGenerator::NormalTemplate;
using MultiGenerator::entry;
using MultiGenerator::testcase;

int main() {
    return 0;
}
</code></pre><p>äº‹å®ä¸Š <code>MultiGenerator</code> å¯¹å†…éƒ¨å®ç°ç»†èŠ‚åšäº†è¾ƒå¤šçš„å°è£…ï¼Œå¦‚æœæœ‰ä½¿ç”¨ <code>IDE</code> çš„æ™ºèƒ½æç¤ºåŠŸèƒ½ï¼Œå¯èƒ½ä¼šå‘ç°æœ‰è‹¥å¹²å­å‘½åç©ºé—´ï¼Œå¦‚ <code>MultiGenerator::Context</code>ï¼Œ<code>MultiGenerator::Interface</code> ç­‰ç­‰ï¼Œåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½ä¸éœ€è¦ä½¿ç”¨è¿™äº›å†…éƒ¨çš„ç»„ä»¶ï¼Œåªéœ€ä½¿ç”¨å®šä¹‰åœ¨ <code>MultiGenerator</code> ä¸‹çš„éƒ¨åˆ†ï¼Œä¸‹æ–‡ä¹Ÿä»…ä¼šä»‹ç»è¿™ä¸€éƒ¨åˆ†ã€‚</p><p>ä»¥ä¸‹æ˜¯æœ¬é¡¹ç›®çš„ç›®å½•ç»“æ„ã€‚</p><pre><code class=language-plain>MultiGenerator/src
â”œâ”€â”€ MultiGenerator
â”‚Â Â  â”œâ”€â”€ Context
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Environment.hpp
â”‚Â Â  â”‚Â Â  â””â”€â”€ Stream.hpp
â”‚Â Â  â”œâ”€â”€ Executor
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Channel.hpp
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ TaskExecutor.hpp
â”‚Â Â  â”‚Â Â  â””â”€â”€ ThreadPool.hpp
â”‚Â Â  â”œâ”€â”€ Interface
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Component.hpp
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Template.hpp
â”‚Â Â  â”‚Â Â  â””â”€â”€ Utility.hpp
â”‚Â Â  â”œâ”€â”€ Variable
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Argument.hpp
â”‚Â Â  â”‚Â Â  â””â”€â”€ DataConfig.hpp
â”‚Â Â  â””â”€â”€ Workflow
â”‚Â Â      â”œâ”€â”€ Callable.hpp
â”‚Â Â      â”œâ”€â”€ Runner.hpp
â”‚Â Â      â”œâ”€â”€ TaskGroup.hpp
â”‚Â Â      â””â”€â”€ Task.hpp
â””â”€â”€ MultiGenerator.hpp
</code></pre><h3 id=åŸºæœ¬æ¦‚å¿µ>åŸºæœ¬æ¦‚å¿µ</h3><h4 id=task>Task</h4><p>åœ¨ <code>MultiGenerator</code> ä¸­ï¼Œç”Ÿæˆçš„è¿‡ç¨‹å¯ä»¥è¢«æ‹†åˆ†ä¸ºè‹¥å¹²ä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ ¹æ®å‚æ•°ç”Ÿæˆæ•°æ®ï¼Œæˆ–è€…è¯»å…¥æ•°æ®å¹¶è¾“å‡ºæ­£ç¡®ç­”æ¡ˆã€‚è¿™æ ·çš„æ¯ä¸ªéƒ¨åˆ†è¢«æˆä¸º <code>Task</code>ã€‚</p><p><code>MultiGenerator</code> é¢„å®šä¹‰äº† 3 ç§ <code>Task</code>ï¼Œå®ƒä»¬æ˜¯æ›´åŠ å…·ä½“çš„ <code>Task</code>ï¼Œå¹¶è§„å®šäº†ç›¸å…³åŠŸèƒ½çš„æ¥å£ï¼Œä»¥ä¾¿ä½¿ç”¨ï¼š</p><ul><li><code>GeneratingTask</code>ï¼šè¡¨ç¤ºæ‰€æœ‰ç”Ÿæˆæ•°æ®çš„ <code>Task</code> çš„æŠ½è±¡ç±»ï¼Œå¯ä»¥ç»§æ‰¿è¯¥æŠ½è±¡ç±»å¹¶å®ç°æ¥å£å‡½æ•°æ¥è·å¾—ç”Ÿæˆæ•°æ®çš„åŠŸèƒ½ã€‚</li><li><code>SolutionTask</code>ï¼šè¡¨ç¤ºæ‰€æœ‰æ ¹æ®ç»™å®šæ•°æ®æ±‚è§£ç­”æ¡ˆçš„ <code>Task</code> çš„æŠ½è±¡ç±»ï¼Œå¯ä»¥ç»§æ‰¿è¯¥æŠ½è±¡ç±»å¹¶å®ç°æ¥å£å‡½æ•°æ¥è·å¾—æ±‚è§£ç­”æ¡ˆçš„åŠŸèƒ½ã€‚ä¸€èˆ¬ä½¿ç”¨æ‚¨çš„æ ‡å‡†ç¨‹åºå³ <code>std</code> æ¥å®ç°ã€‚</li><li><code>IntegratedGeneratingTask</code>ï¼šè¡¨ç¤ºæ‰€æœ‰åŒæ—¶ç”Ÿæˆæ•°æ®å’Œæ±‚è§£ç­”æ¡ˆçš„ <code>Task</code> çš„æŠ½è±¡ç±»ï¼Œå¯ä»¥ç”¨äºå®ç°å¿…é¡»åŒæ—¶ç”Ÿæˆå’Œæ±‚è§£çš„ç”Ÿæˆå™¨ï¼Œæ¯”å¦‚ä¸€äº›å¼ºåˆ¶åœ¨çº¿é¢˜ç›®ã€‚</li></ul><p>æ‚¨åªéœ€å®ç°è¿™äº›æŠ½è±¡ç±»çš„æ¥å£ï¼Œå¹¶é€šè¿‡ç»™å®šçš„æµè¿›è¡Œ <code>IO</code> æ“ä½œï¼Œæ— éœ€è€ƒè™‘æ–‡ä»¶ç³»ç»Ÿç›¸å…³çš„é—®é¢˜ï¼Œ<code>MultiGenerator</code> å¯ä»¥å¤„ç†å®ƒä»¬ã€‚</p><h4 id=template>Template</h4><p><code>Template</code> è§„å®šäº†ä¸€é“é¢˜ç›®çš„ç”Ÿæˆç¨‹åºåº”è¯¥å¦‚ä½•è°ƒç”¨ <code>Task</code>ï¼Œæ¯”å¦‚æ™®é€šçš„é¢˜ç›®ï¼Œæ²¡æœ‰å¼ºåˆ¶åœ¨çº¿æ“ä½œï¼Œæ­¤æ—¶åªéœ€è¦åˆ†åˆ«ç”Ÿæˆæ•°æ®å’Œæ±‚è§£ç­”æ¡ˆï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>NormalTemplate</code> æ¥ç®¡ç†è¿™äº› <code>GeneratingTask</code> å’Œ <code>SolutionTask</code>ã€‚</p><p><code>MultiGenerator</code> é¢„å®šä¹‰äº† 2 ç§ <code>Template</code>ï¼š</p><ul><li><code>NormalTemplate</code>ï¼šå¯ä»¥è°ƒç”¨å®ç°äº† <code>GeneratingTask</code> å’Œ <code>SolutionTask</code> çš„ç±»ï¼Œç”¨äºæ™®é€šçš„æ•°æ®ç”Ÿæˆï¼Œç”±äºç”Ÿæˆå’Œæ±‚è§£æ˜¯å¯åˆ†ç¦»çš„ï¼Œæ‰€ä»¥å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨ç³»ç»Ÿèµ„æºè¿›è¡Œå¹¶è¡Œä¼˜åŒ–ã€‚</li><li><code>IntegratedTemplate</code>ï¼šå¯ä»¥è°ƒç”¨å®ç°äº† <code>IntegratedGeneratingTask</code> çš„ç±»ï¼Œå¯ä»¥ç”¨äºéœ€è¦å¼ºåˆ¶åœ¨çº¿çš„é¢˜ç›®çš„æ•°æ®ç”Ÿæˆã€‚</li></ul><p><code>Template</code> å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºé¢˜ç›®çš„åç§°ï¼Œæ‰€æœ‰ç”Ÿæˆçš„æ•°æ®éƒ½ä¼šè‡ªåŠ¨å¸¦ä¸Šè¯¥åç§°ã€‚ç„¶åæ‚¨å¯ä»¥å‘ <code>Template</code> æ·»åŠ æµ‹è¯•ç‚¹ä¿¡æ¯ï¼Œå¦‚è¦ä½¿ç”¨çš„ç”Ÿæˆå™¨ï¼ˆå®ç°äº† <code>GeneratingTask</code>ï¼‰å’Œæ±‚è§£å™¨ï¼ˆå®ç°äº† <code>SolutionTask</code>ï¼‰ï¼Œæµ‹è¯•ç‚¹ç¼–å·ï¼Œæµ‹è¯•ç‚¹çš„æ•°æ®è§„æ¨¡é…ç½®ç­‰ã€‚éšå <code>Template</code> ä¼šè‡ªåŠ¨å°†è¿™äº›å‚æ•°ä¼ ç»™ <code>Task</code>ï¼Œå®ç°æ•°æ®ç”Ÿæˆçš„å®šåˆ¶ã€‚</p><p>å¦‚æœæ‚¨éœ€è¦å¯¹ä¸åŒçš„æµ‹è¯•ç‚¹åº”ç”¨ä¸åŒçš„ç”Ÿæˆå™¨ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨ <code>NormalTemplate</code> æ—¶ï¼Œéœ€è¦æ„é€ å…·æœ‰ç‰¹æ®Šæ€§è´¨çš„æ•°æ®ï¼Œæ‚¨å¯ä»¥å®šä¹‰å¤šä¸ªç”Ÿæˆå™¨ï¼Œåªè¦å®ƒä»¬å®ç°äº† <code>GeneratingTask</code>ï¼Œå°±å¯ä»¥è¢« <code>Template</code> è°ƒç”¨ï¼Œè€Œæ— éœ€åšä»»ä½•çš„ç‰¹æ®Šåˆ¤æ–­ã€‚</p><h4 id=testcase>testcase</h4><p><code>testcase</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ç”¨äºç”Ÿæˆä¸€ä¸ªæµ‹è¯•ç‚¹çš„é…ç½®ï¼Œè¿™ä¸ªæµ‹è¯•ç‚¹å¯ä»¥æ˜¯ä¸€ä¸ªå­ä»»åŠ¡ä¸­çš„æµ‹è¯•ç‚¹ã€‚å®ƒè¿˜æ¥å—ä¸€ä¸ª <code>std::unordered_map&lt;std::string, std::string></code> ä½œä¸ºæµ‹è¯•ç‚¹é…ç½®ï¼Œè¿™é‡Œé€‰ç”¨ <code>std::string</code> ä½œä¸ºé”®å’Œå€¼æ˜¯å› ä¸ºè¿™æ ·å¯ä»¥æœ€ç®€å•çš„å®ç°é…ç½®ï¼Œå‡å¦‚æ‚¨éœ€è¦åŒæ—¶ä¼ å…¥ <code>int</code> å’Œ <code>double</code> çš„å€¼ä½œä¸ºé…ç½®ï¼Œ<code>std::string</code> å¯ä»¥å¾ˆå¥½åœ°å‚¨å­˜å®ƒä»¬ã€‚åé¢ä¼šè¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨è¯¥å‡½æ•°ã€‚</p><h4 id=dataconfig>DataConfig</h4><p><code>DataConfig</code> å‚¨å­˜äº†æµ‹è¯•ç‚¹é…ç½®ä¿¡æ¯ï¼ˆä¸åŒ…æ‹¬æµ‹è¯•ç‚¹ç¼–å·ï¼Œäº‹å®ä¸Šå¾ˆå°‘æƒ…å†µä¼šéœ€è¦ç¼–å·ï¼Œå› ä¸º <code>MultiGenerator</code> ä¼šåœ¨å¤–éƒ¨è‡ªåŠ¨å¤„ç†æµ‹è¯•ç‚¹ç¼–å·ï¼Œæ— éœ€ <code>Task</code> å†…éƒ¨æ’æ‰‹ï¼‰ï¼Œ<code>testcase</code> å‡½æ•°æ‰€æ¥å—çš„ <code>std::unordered_map&lt;std::string, std::string></code> ä¹Ÿå°±æ˜¯æ„é€ å®ƒçš„å‚æ•°ã€‚</p><p><code>DataConfig</code> ä¸ä¼šè‡ªåŠ¨è½¬æ¢å€¼åˆ°æ‚¨æ‰€éœ€è¦çš„ç±»å‹ï¼Œå®ƒåªä¼šè¿”å›ä¸€ä¸ª <code>std::string</code>ï¼Œä½†æ˜¯è½¬æ¢ç±»å‹å¤§å¤šæ•°æƒ…å†µä¸‹åªéœ€è¦ä½¿ç”¨ <code>std::stoi()</code> æˆ– <code>std::stof()</code> å®Œæˆï¼Œæ›´åŠ é«˜çº§çš„ä¹Ÿä»…éœ€è¦ä½¿ç”¨ <code>std::stringstream</code> å³å¯ã€‚</p><h3 id=åˆ›å»º-task>åˆ›å»º Task</h3><p><code>MultiGenerator</code> æ‰€æä¾›çš„ <code>Task</code> å·²ç»æ‹¥æœ‰å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œå¦‚å¦‚ä½•å¤„ç†æ–‡ä»¶åï¼Œå¦‚ä½•ä¸æ–‡ä»¶ç³»ç»Ÿäº¤äº’ï¼Œä½†å®ƒå”¯ç‹¬ä¸çŸ¥é“å…·ä½“è¯¥å¦‚ä½•ç”Ÿæˆæ•°æ®ï¼Œæ‰€ä»¥æ‚¨åªéœ€è¦é€šè¿‡ç»§æ‰¿ç›¸å…³ <code>Task</code> æ¥å®ç°æ¥å£ï¼Œä»è€Œè¡¥ä¸Šç¼ºå¤±çš„ä¸€éƒ¨åˆ†åŠŸèƒ½ã€‚</p><h4 id=generatingtask>GeneratingTask</h4><p>å‰é¢æåˆ° <code>GeneratingTask</code> è¡¨ç¤ºæ‰€æœ‰ç”Ÿæˆæ•°æ®çš„ <code>Task</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><pre><code class=language-cpp>class MyGenerator : public GeneratingTask {
/** è¿™é‡Œåªå¯ä»¥ä½¿ç”¨ private æˆ– protected */
private:
    /** å®ç°è¿™ä¸ªæ¥å£ */
    void generate(std::ostream &amp;data, const DataConfig &amp;config) override {
        /** é€šè¿‡ DataConfig è·å–é…ç½®ï¼Œget å†…å¡«ä¸Šè‡ªå®šä¹‰çš„é”® */
        int someValue = std::stoi(config.get(&quot;some key&quot;).value());
        /** åœ¨è¿™é‡Œå®ç°ç”Ÿæˆæ•°æ® */
        int someResult = someFunction();
        /** è¾“å‡ºç»“æœ */
        data &lt;&lt; someResult &lt;&lt; std::endl;
    }

    int sumeFunction() {
        return /* ... */;
    }
};
</code></pre><p>å¦‚æœæ‚¨ä¸äº†è§£ <code>C++</code> çš„é¢å‘å¯¹è±¡ç‰¹æ€§ï¼Œæ‚¨å¯æŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œæˆ–è€…ç›´æ¥å¤åˆ¶ä¸Šé¢çš„æ¨¡æ¿ï¼Œæ‚¨åªè¦ä¿ç•™ä¸Šè¿° <code>generate(std::ostream &data, const DataConfig &config)</code> æˆå‘˜å‡½æ•°å³å¯ã€‚</p><h4 id=solutiontask>SolutionTask</h4><pre><code class=language-cpp>class MySolution : public SolutionTask {
private:
    void solve(std::istream &amp;dataIn, std::ostream &amp;dataOut, const DataConfig &amp;) override {
        int someValue;
        /** åƒ std::cin ä¸€æ ·è¯»å…¥æ•°æ® */
        dataIn &gt;&gt; someValue;
        int someResult = someFunction();
        /** åƒ std::cout ä¸€æ ·è¾“å‡ºç­”æ¡ˆ */
        dataOut &lt;&lt; someResult &lt;&lt; std::endl;
    }

    int sumeFunction() {
        return /* ... */;
    }
};
</code></pre><p>è¿˜æ˜¯åŒæ ·çš„é“ç†ï¼Œæ‚¨åªéœ€è¦ä¿ç•™ <code>void solve(std::istream &dataIn, std::ostream &dataOut, const DataConfig &config)</code> æˆå‘˜å‡½æ•°ï¼Œå¹¶åœ¨å…¶ä¸­å¡«ä¸Šè‡ªå·±çš„ä¸œè¥¿å³å¯ã€‚</p><p>ç†è®ºä¸Šæ‚¨å¯ä»¥ç›´æ¥å°† <code>std</code> çš„ä¸œè¥¿å¤åˆ¶è¿› <code>MySolution</code> è¿™ä¸ªç±»ï¼Œå¹¶æŠŠ <code>main()</code> å‡½æ•°æ”¹ä¸ºè¿™ä¸ªæˆå‘˜å‡½æ•°ï¼Œç„¶ååšå¥½åˆå§‹åŒ–å·¥ä½œï¼Œå› ä¸ºæ‰€æœ‰çš„ <code>Task</code> éƒ½æ˜¯è¦åœ¨å †ä¸Šåˆ†é…å†…å­˜ç„¶åè¿è¡Œçš„ï¼Œæ‰€ä»¥ä¸èƒ½å¤Ÿä¿è¯æ‰€æœ‰æ•°æ®éƒ½å’Œå…¨å±€å˜é‡ä¸€æ ·è¢«åˆå§‹åŒ–ä¸º <code>0</code>ã€‚å¯¹äºæ•°ç»„ï¼Œå¯ä»¥å°†å…¶æ›¿æ¢ä¸º <code>std::array</code>ï¼Œå®ƒä¼šé»˜è®¤åˆå§‹åŒ–æ‰€æœ‰çš„å…ƒç´ ä¸º <code>0</code>ï¼Œä¸”åœ¨ä½¿ç”¨ä¸Šå’ŒåŸç”Ÿæ•°ç»„æ²¡æœ‰ä»»ä½•å·®åˆ«ï¼ŒåŒ…æ‹¬æ€§èƒ½å¼€é”€ã€‚</p><h4 id=integratedgeneratingtask>IntegratedGeneratingTask</h4><p>å¦‚æœæ‚¨éœ€è¦åŒæ—¶ç”Ÿæˆå’Œæ±‚è§£ï¼Œé‚£ <code>IntegratedGeneratingTask</code> ä¼šæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå®ƒåŒæ—¶æä¾›äº†ä¸¤ä¸ªè¾“å‡ºæµï¼Œåˆ†åˆ«è¿æ¥äº†æ•°æ®çš„æ–‡ä»¶ï¼ˆ<code>*.in</code>ï¼‰å’Œç­”æ¡ˆçš„æ–‡ä»¶ï¼ˆ<code>*.out</code>ï¼‰ã€‚</p><pre><code class=language-cpp>class MyIntegratedGenerator : public IntegratedGeneratingTask {
private:
    void generate(std::ostream &amp;dataIn, std::ostream &amp;dataOut, const DataConfig &amp;config) override {
        while (/* æ¡ä»¶ */) {
            auto someData = /* ... */;
            auto someAnswer = /* ... */;
            dataIn &lt;&lt; someData &lt;&lt; std::endl;
            dataOut &lt;&lt; someAnswer &lt;&lt; std::endl;
        }
    }
};
</code></pre><p><code>IntegratedGeneratingTask</code> ä¸€èˆ¬ç”¨äºä¸ºå¼ºåˆ¶åœ¨çº¿é¢˜ç›®æˆ–ä¸€äº›å¤æ‚çš„æ•°æ®ç»“æ„é¢˜ç›®ç”Ÿæˆæ•°æ®ã€‚</p><h3 id=ä½¿ç”¨-testcase-åˆ›å»ºæµ‹è¯•ç‚¹é…ç½®>ä½¿ç”¨ <code>testcase</code> åˆ›å»ºæµ‹è¯•ç‚¹é…ç½®</h3><p><code>testcase</code> å‡½æ•°å¯ä»¥ç”¨äºåˆ›å»ºæµ‹è¯•ç‚¹çš„é…ç½®ï¼Œå…¶æœ‰ä¸¤ä¸ªé‡è½½ï¼š</p><pre><code class=language-cpp>std::shared_ptr&lt;Variable::Argument&gt; testcase(int id, const std::unordered_map&lt;std::string, std::string&gt; &amp;config);

std::shared_ptr&lt;Variable::Argument&gt; testcase(int subtaskId, int id, const std::unordered_map&lt;std::string, std::string&gt; &amp;config)
</code></pre><p>è¿™ä¸¤ä¸ªå‡½æ•°éƒ½è¿”å› <code>Variable::Argument</code> çš„æ™ºèƒ½æŒ‡é’ˆï¼Œå…¶å‚¨å­˜ç€æµ‹è¯•ç‚¹çš„é…ç½®å‚æ•°ã€‚ä»å‡½æ•°ç­¾åå¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹å‡ºç¬¬ä¸€ä¸ªæ˜¯ç”¨äºåˆ›å»ºæ— å­ä»»åŠ¡çš„æµ‹è¯•ç‚¹ï¼Œè€Œç¬¬äºŒä¸ªæ˜¯åˆ›å»ºæœ‰å­ä»»åŠ¡çš„æµ‹è¯•ç‚¹ã€‚</p><p>è¿™ä¸¤ä¸ªå‡½æ•°éƒ½åœ¨æœ€åæ¥å—ä¸€ä¸ª <code>std::unordered_map&lt;std::string, std::string></code> ä½œä¸ºæµ‹è¯•ç‚¹é…ç½®ï¼Œä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¼ å…¥è¿™ä¸ªå‚æ•°ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ <code>entry</code> å‡½æ•°åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹ï¼Œä½¿ä»£ç æ›´åŠ ç®€å•æ˜“è¯»ï¼š</p><pre><code class=language-cpp>template &lt;typename Value&gt;
std::pair&lt;std::string, std::string&gt; entry(const std::string &amp;key, const Value &amp;value);
</code></pre><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªéœ€è¦å°†è¿”å›çš„ <code>Variable::Argument</code> æŒ‡é’ˆå†ä¼ ç»™ <code>Template</code> å³å¯ï¼Œæ— éœ€åšé¢å¤–çš„å·¥ä½œã€‚</p><p>å¦‚æœè¦åˆ›å»ºç¼–å·ä¸º <code>2</code>ï¼Œå¸¦æœ‰ <code>n = 10</code> ä¸” <code>m = 5</code> çš„é…ç½®ï¼Œå¯ä»¥è¿™æ ·è·å¾—é…ç½®å‚æ•°ï¼š</p><pre><code class=language-cpp>auto arg = testcase(2, { entry(&quot;n&quot;, 10), entry(&quot;m&quot;, 5) });
</code></pre><p>å¦‚æœè¦åˆ›å»ºå­ä»»åŠ¡ç¼–å·ä¸º <code>1</code>ï¼Œå­ä»»åŠ¡å†…çš„ç¼–å·ä¸º <code>5</code>ï¼Œå¸¦æœ‰ <code>str = "abc"</code> ä¸” <code>n = 1</code> çš„é…ç½®ï¼Œå¯ä»¥è¿™æ ·è·å¾—é…ç½®å‚æ•°ï¼š</p><pre><code class=language-cpp>auto arg = testcase(1, 5, { entry(&quot;str&quot;, &quot;abc&quot;), entry(&quot;n&quot;, 1) });
</code></pre><h3 id=æŠŠ-task-ä¼ ç»™-template>æŠŠ <code>Task</code> ä¼ ç»™ <code>Template</code></h3><p>å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œ<code>Template</code> è§„å®šäº†ä¸€é“é¢˜ç›®çš„ç”Ÿæˆç¨‹åºåº”è¯¥å¦‚ä½•è°ƒç”¨ <code>Task</code>ï¼Œä¸” <code>MultiGenerator</code> å®šä¹‰äº† <code>NormalTemplate</code> å’Œ <code>IntegratedTemplate</code>ï¼Œä¸¤ç§ <code>Template</code> ä½¿ç”¨æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œä»¥ä¸‹ä»¥ <code>NormalTemplate</code> ä¸ºä¾‹ã€‚</p><p>æ„é€  <code>NormalTemplate</code> éœ€è¦ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºé¢˜ç›®çš„åå­—ã€‚</p><pre><code class=language-cpp>NormalTemplate temp(&quot;problem&quot;);
</code></pre><p>éšåå¯ä»¥ä½¿ç”¨ <code>add</code> æˆå‘˜å‡½æ•°åˆ›å»ºæµ‹è¯•ç‚¹é…ç½®ï¼Œç­¾åå¦‚ä¸‹ï¼š</p><pre><code class=language-cpp>template &lt;typename Generator, typename Solution&gt;
void NormalTemplate::add(std::shared_ptr&lt;Variable::Argument&gt; arg);
</code></pre><p>å…¶ä¸­ <code>Generator</code> æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„å®ç°äº† <code>GeneratingTask</code> çš„ç±»ï¼Œæ¯”å¦‚ä¸Šæ–‡ç¤ºä¾‹ä¸­çš„ <code>MyGenerator</code>ï¼Œ<code>Solution</code> åˆ™æ˜¯å®ç°äº† <code>SolutionTask</code> çš„ç±»ï¼Œæ¯”å¦‚ä¸Šæ–‡ç¤ºä¾‹ä¸­çš„ <code>MySolution</code>ã€‚</p><p><code>IntegratedTemplate</code> çš„ <code>add</code> å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š</p><pre><code class=language-cpp>template &lt;typename IntegratedGenerator&gt;
void IntegratedTemplate::add(std::shared_ptr&lt;Variable::Argument&gt; arg);
</code></pre><p>å…¶ä¸­ <code>IntegratedGenerator</code> æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„å®ç°äº† <code>IntegratedGeneratingTask</code> çš„ç±»ï¼Œæ¯”å¦‚ä¸Šæ–‡ç¤ºä¾‹ä¸­çš„ <code>MyIntegratedGenerator</code>ã€‚</p><p>æ‚¨éœ€è¦æŠŠ <code>testcase</code> å‡½æ•°è¿”å›çš„ç»“æœä¼ ç»™è¿™äº›å‡½æ•°ï¼š</p><pre><code class=language-cpp>temp.add&lt;MyGenerator, MySolution&gt;(testcase(1, {}));
</code></pre><p>è¿™æ · <code>NormalTemplate</code> å°±ä¼šçŸ¥é“è¦å¯¹ç¬¬ 1 ä¸ªæµ‹è¯•ç‚¹åº”ç”¨ <code>MyGenerator</code> ç”Ÿæˆæ•°æ®ï¼Œç”¨ <code>MySolution</code> æ±‚è§£ç­”æ¡ˆï¼Œå¹¶ä¸”ç”Ÿæˆçš„æ–‡ä»¶ä¸º <code>problem1.in</code> å’Œ <code>problem1.out</code>ã€‚</p><p>å¯ä»¥ç»§ç»­ä½¿ç”¨ <code>add</code> å‡½æ•°æ·»åŠ æµ‹è¯•ç‚¹ï¼Œä½¿ç”¨æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œåªéœ€ä¿®æ”¹ <code>testcase</code> å‡½æ•°ä¸­çš„æµ‹è¯•ç‚¹ç¼–å·å³å¯ã€‚æ³¨æ„å¦‚æœæµ‹è¯•ç‚¹ç¼–å·å‡ºç°é‡å¤ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p><h3 id=å¼€å§‹ç”Ÿæˆæ•°æ®>å¼€å§‹ç”Ÿæˆæ•°æ®</h3><p>è¿™ä¸€éƒ¨åˆ†å¾ˆç®€å•ï¼Œåªéœ€è¦æŒ‡å®šå¹¶è¡Œä»»åŠ¡æ•°å³å¯ï¼š</p><pre><code class=language-cpp>temp.execute(8);
</code></pre><p>ä¸€èˆ¬å¹¶è¡Œä»»åŠ¡æ•°ä¼šè®¾å®šä¸ºæ‚¨çš„ <code>CPU</code> æ ¸å¿ƒæ•°æˆ–è€…çº¿ç¨‹æ•°ã€‚å¦‚æœæ‚¨ä¸çŸ¥é“æ‚¨çš„ <code>CPU</code> æ ¸å¿ƒæ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>std:ğŸ§µ:hardware_concurrency</code> å‡½æ•°æŸ¥è¯¢ï¼š</p><pre><code class=language-cpp>temp.execute(std:ğŸ§µ:hardware_concurrency());
</code></pre><h3 id=å®Œæ•´ç¤ºä¾‹>å®Œæ•´ç¤ºä¾‹</h3><p>æœ€ä¸Šé¢çš„ç¤ºä¾‹å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œå‚è€ƒé‚£ä¸ªå³å¯ã€‚</p><h2 id=faq>FAQ</h2><p>Q1ï¼šæˆ‘åœ¨ <code>Linux</code> å¹³å°ä¸‹ï¼Œå¦‚æœç¼–è¯‘ä¸èƒ½å¤Ÿé€šè¿‡ï¼Œå¹¶ä¸”å«æœ‰é”™è¯¯ä¿¡æ¯ä¸­å«æœ‰ <code>pthread</code> ç›¸å…³çš„ä¸œè¥¿ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</p><p>A1ï¼š<code>Linux</code> ä¸‹ä½¿ç”¨å¤šçº¿ç¨‹éœ€è¦è°ƒç”¨ <code>pthread</code>ï¼Œéœ€è¦ç»™ <code>g++</code> åŠ ä¸Š <code>-pthread</code> å‚æ•°ã€‚</p></div><div class=article-footer><blockquote class=mt-2x><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>æœ¬æ–‡é“¾æ¥:</strong>
<a href=https://ctj12461.vercel.app/contents/20220404-multigenerator-document/ title="MultiGenerator ä½¿ç”¨æ–‡æ¡£" target=_blank rel=external>https://ctj12461.vercel.app/contents/20220404-multigenerator-document/</a></li><li class=post-copyright-license><strong>License:</strong>
<a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=external>CC BY-NC 4.0</a></li></ul></blockquote><div class="panel panel-default panel-badger"><div class=panel-body><figure class=media><div class=media-left><a href=https://github.com/ctj12461 target=_blank class="img-burn thumb-sm visible-lg"><img src=https://ctj12461.vercel.app/avatar.jpg class="img-rounded w-full" alt></a></div><div class=media-body><h3 class=media-heading><a href=https://github.com/ctj12461 target=_blank><span class=text-dark>ctj12461</span><small class=ml-1x></small></a></h3><div>å½“ä½ æƒ³è¦æ”¾å¼ƒæ—¶ï¼Œæƒ³æƒ³ä½ ä¸ºä»€ä¹ˆå¼€å§‹ã€‚</div></div></figure></div></div></div></article></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class=bar-inner><ul class="pager pull-left"><li class=prev><a href=https://ctj12461.vercel.app/contents/20220329-traps-of-std-function-and-std-bind/ title="std::function å’Œ std::bind çš„ä½¿ç”¨é™·é˜±"><i class="icon icon-angle-left" aria-hidden=true></i><span>&nbsp;&nbsp;ä¸‹ä¸€ç¯‡</span></a></li><li class=toggle-toc><a class="toggle-btn collapsed" data-toggle=collapse href=#collapseToc aria-expanded=false title=æ–‡ç« ç›®å½• role=button><span>[&nbsp;</span><span>æ–‡ç« ç›®å½•</span>
<i class="text-collapsed icon icon-anchor"></i>
<i class="text-in icon icon-close"></i>
<span>]</span></a></li></ul><div class=bar-right><div class=share-component data-sites=weibo,qq,wechat,facebook,twitter data-mobile-sites=weibo,qq,qzone></div></div></div></nav></main><footer class=footer itemscope itemtype=http://schema.org/WPFooter><ul class=social-links><li><a href=https://github.com/ctj12461 target=_blank title=github data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li><li><a href=https://ctj12461.vercel.app/index.xml target=_blank title=rss data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li></ul><div class=copyright>&copy;2022 -
2022<div class=publishby>Theme by <a href=https://github.com/xiaoheiAh target=_blank>xiaoheiAh </a>base on<a href=https://github.com/xiaoheiAh/hugo-theme-pure target=_blank> pure</a>.</div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type=text/x-mathjax-config>
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script>
<script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script type=text/javascript src=https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js></script>
<script type=text/javascript src=https://cdn.staticfile.org/highlight.js/9.15.10/languages/python.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/highlight.js/9.15.10/languages/javascript.min.js defer></script><script>hljs.configure({tabReplace:"    ",classPrefix:''}),hljs.initHighlightingOnLoad()</script>
<script src=https://ctj12461.vercel.app/js/application.min.e720b935330b2a176cfb4b8bd9a6cc632caf6b752f94e87c62152a9557ff6d15.js></script>
<script src=https://ctj12461.vercel.app/js/plugin.min.334875d4d4a72afb866e446df61b5f4bf1f0a516d1303166f52f7804d17ef3ab.js></script>
<script>(function(e){var t={TRANSLATION:{POSTS:"æ–‡ç« ",PAGES:"é¡µé¢",CATEGORIES:"åˆ†ç±»",TAGS:"æ ‡ç­¾",UNTITLED:"(æœªå‘½å)"},ROOT_URL:"https://ctj12461.vercel.app",CONTENT_URL:"https://ctj12461.vercel.app/searchindex.json "};e.INSIGHT_CONFIG=t})(window)</script><script type=text/javascript src=https://ctj12461.vercel.app/js/insight.min.759e5002714e12761afcd512f103d39c86573165db51972dd3b24df6eddf238ed3e3e85c1988e96cba09419d1deccdeb68c15284f2c3d03049fad53c11774524.js defer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js></script>
<script>tocbot.init({tocSelector:".js-toc",contentSelector:".js-toc-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0})</script><script async src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></body></html>